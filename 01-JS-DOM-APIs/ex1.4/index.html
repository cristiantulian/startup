<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="description" content="Cristian Tulian">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
       
        <title>Topic 1 - Exercise 4</title>

       <!-- Normalize css file -->
        <link rel="stylesheet" href="normalize.css">

        <!-- Style css file -->
        <link rel="stylesheet" href="style.css">
    </head>        
    <body class="body">
        <!-- Page header -->
        <header>
                <h1>
                </h1>
        </header>
        <!-- Page header -->

        <!-- Shown content -->
        <section>
            <header>
                <h3>
                </h3>
            </header>

            <article>
            </article>
        </section>
        
        <!-- Shown content --> 
        <form class="example">
            <input type="text" placeholder="Search.." name="search">
            <button type="submit"></i>Search</button>
        </form>
        <div id="demo">
            <h1>XMLHttpRequest</h1>
            <button type="button" onclick="loadDocumentation()">Call Content</button>
            <section id="otraSeccion"></section>
        </div>
        <ul style="list-style-type:square"></ul>
        <!-- App js -->
        <script>
        var loadDocumentation = function () {
            performAjaxCall({method: 'GET', url: 'https://api.github.com/search/repositories?q=JavaScript'})
                .then((response) => {
                    document.getElementById("otraSeccion").innerText = response;
                    
                })
                .catch((error) => {
                });
        };

         var performAjaxCall = function (config) {
            return new Promise (function promiseHandler(resolve, reject) {
                var xhttp = new XMLHttpRequest();
                var responseParsed;

                xhttp.onreadystatechange = function() {
                    if (this.readyState === 4 && this.status === 200) {
                         resolve(this.responseText);
                    } else if (this.status === 500) {
                        reject('error');
                    }
                }

                xhttp.open(config.method, config.url);
                xhttp.send();
            });
        } 
        </script>
    </body>
</html>